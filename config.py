"""
Конфигурация генератора датасета для платной поликлиники
"""

# Основные параметры датасета
DATASET_SIZE = 50000
RANDOM_SEED = 42

# Рабочее время поликлиники
WORK_HOURS_START = 9  # 09:00
WORK_HOURS_END = 18   # 18:00
WORK_DAYS = [0, 1, 2, 3, 4]  # Понедельник-пятница (0=Monday)

# Часовой пояс (Московское время)
TIMEZONE = "+03:00"

# Вероятности и ограничения
CLIENT_REPEAT_PROBABILITY = 0.60  # 60% вероятность повторного визита (было 0.25)
MAX_SYMPTOMS_PER_VISIT = 10
MAX_ANALYSES_PER_VISIT = 5
CARD_REUSE_LIMIT = 5

# Интервалы времени
ANALYSIS_MIN_HOURS = 24  # Минимум через сутки
ANALYSIS_MAX_HOURS = 72  # Максимум через 3 дня

# Распределения банков и платежных систем
BANKS_DISTRIBUTION = {
    "sberbank": 0.40,
    "vtb": 0.20, 
    "alfabank": 0.15,
    "tinkoff": 0.10,
    "gazprombank": 0.08,
    "raiffeisen": 0.07
}

PAYMENT_SYSTEMS_DISTRIBUTION = {
    "mir": 0.50,
    "visa": 0.30,
    "mastercard": 0.20
}

# Банковские BIN-коды (первые 6 цифр карт)
BANK_BINS = {
    "sberbank": {
        "mir": ["220004", "220005", "220007"],
        "visa": ["427683", "427901", "427644"],
        "mastercard": ["548673", "546938", "510126"]
    },
    "vtb": {
        "mir": ["220002", "220003"],
        "visa": ["447520", "415374"],
        "mastercard": ["532301", "510020"]
    },
    "alfabank": {
        "mir": ["220006"],
        "visa": ["462729", "415428"],
        "mastercard": ["510043", "548699"]
    },
    "tinkoff": {
        "mir": ["220014"],
        "visa": ["437772", "521324"],
        "mastercard": ["553691", "548701"]
    },
    "gazprombank": {
        "mir": ["220008"],
        "visa": ["463027"],
        "mastercard": ["510002"]
    },
    "raiffeisen": {
        "mir": ["220009"],
        "visa": ["462204"],
        "mastercard": ["510003"]
    }
}

# Стоимость анализов (в рублях)
ANALYSIS_COSTS = {
    "общий анализ крови": 800,
    "биохимический анализ крови": 1500,
    "общий анализ мочи": 600,
    "мазок на ковид": 2000,
    "рентген грудной клетки": 2500,
    "эко кг": 3000,
    "узи брюшной полости": 2800,
    "флюорография": 1200,
    "анализ на сахар": 400,
    "анализ на холестерин": 500
}

# Диапазоны стоимости по типам анализов
COST_RANGES = {
    "кровь": (300, 3000),
    "моча": (400, 1500),
    "мазок": (800, 2500),
    "рентген": (1500, 4000),
    "узи": (2000, 5000),
    "эндоскопия": (3000, 8000),
    "мрт": (8000, 15000),
    "кт": (6000, 12000)
}

# Форматы паспортов по странам
PASSPORT_FORMATS = {
    "ru": {
        "pattern": r"^\d{4} \d{6}$",
        "series_range": (1000, 9999),
        "number_range": (100000, 999999)
    },
    "by": {
        "pattern": r"^[A-Z]{2}\d{7}$",
        "prefixes": ["AB", "BM", "HB", "KB", "MP", "MC", "PP"]
    },
    "kz": {
        "pattern": r"^N\d{8}$",
        "prefix": "N"
    }
}

# Российские регионы для паспортов (код региона с весами)
RU_REGIONS = {
    77: {"name": "Москва", "weight": 0.15},
    50: {"name": "Московская область", "weight": 0.08},
    78: {"name": "Санкт-Петербург", "weight": 0.08},
    47: {"name": "Ленинградская область", "weight": 0.04},
    23: {"name": "Краснодарский край", "weight": 0.06},
    61: {"name": "Ростовская область", "weight": 0.05},
    66: {"name": "Свердловская область", "weight": 0.05},
    54: {"name": "Новосибирская область", "weight": 0.04},
    2: {"name": "Республика Башкортостан", "weight": 0.04},
    16: {"name": "Республика Татарстан", "weight": 0.04},
    52: {"name": "Нижегородская область", "weight": 0.04},
    74: {"name": "Челябинская область", "weight": 0.04},
    63: {"name": "Самарская область", "weight": 0.04},
    59: {"name": "Пермский край", "weight": 0.03},
    38: {"name": "Иркутская область", "weight": 0.03},
    72: {"name": "Тюменская область", "weight": 0.03},
    36: {"name": "Воронежская область", "weight": 0.03},
    34: {"name": "Волгоградская область", "weight": 0.03},
    42: {"name": "Кемеровская область", "weight": 0.03},
    39: {"name": "Калининградская область", "weight": 0.02},
    # Остальные регионы с меньшими весами
    1: {"name": "Республика Адыгея", "weight": 0.01},
    3: {"name": "Республика Бурятия", "weight": 0.01},
    4: {"name": "Республика Алтай", "weight": 0.01},
    5: {"name": "Республика Дагестан", "weight": 0.01},
    6: {"name": "Республика Ингушетия", "weight": 0.01},
    7: {"name": "Кабардино-Балкарская Республика", "weight": 0.01},
    8: {"name": "Республика Калмыкия", "weight": 0.01},
    9: {"name": "Карачаево-Черкесская Республика", "weight": 0.01},
    10: {"name": "Республика Карелия", "weight": 0.01}
}

# Распределение стран для паспортов
PASSPORT_COUNTRIES_DISTRIBUTION = {
    "ru": 0.80,  # 80% российские паспорта
    "by": 0.12,  # 12% белорусские
    "kz": 0.08   # 8% казахские
}

# Параметры производительности
BATCH_SIZE = 1000  # Размер пакета для обработки
MAX_MEMORY_MB = 512  # Максимальное использование памяти

# Пути к файлам
OUTPUT_FILE = "clinic_dataset.xlsx"
TEMP_DIR = "/tmp/clinic_generator"

# Настройки логирования
LOG_LEVEL = "INFO"
LOG_FORMAT = "%(asctime)s - %(levelname)s - %(message)s"